<%
// use "site.posts" to make all articles in one page. (Need not install hexo-generator-archive)
    var title = '';
    if (page.category) title = page.category;
    if (page.tag) title = "#" + page.tag;
    if (page.archive) {
        if (page.year) title = page.year + (page.month ? '/' + page.month : '');
        else title = __('archive_a');
    }
%>
<div class="archive__container">
	<h2><%- title %></h2>
	<%
    var groupObj = _.groupBy(site.posts.toArray(), function(p){return p.date.format('YYYY')});
    var groupArr = [];
    for (var year in groupObj){
      var postsInThisYear = groupObj[year];
      var sortedPosts = _.sortBy(postsInThisYear, function(p) { return p.date.format('MMDD') });
      groupArr.push({
        year: year,
        posts: sortedPosts.reverse()
      });
    }
    %>
    <% groupArr.reverse().forEach(function(item) { %>
      <h3 class="year"><%- item.year %></h3>
      <ul class="archive-list-of-posts">
        <%- partial('_partial/article-archive', {posts: item.posts}) %>
      </ul>
    <% }) %>
</div>
